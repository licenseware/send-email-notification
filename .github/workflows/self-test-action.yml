name: self-test-action

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  action:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        name: Checkout

      - name: Send normal email
        uses: licenseware/send-email-notification@45d41bfcbf3194b1a50d41c9c8d036c4ef695866
        with:
          api-key: ${{ secrets.SENDGRID_API_KEY }}
          subject: Self Test Action 1 | ${{ github.ref_name }}-${{ github.run_id }}
          from: ${{ secrets.SENDGRID_FROM_EMAIL }}
          to: ${{ secrets.SENDGRID_TO_EMAIL }}
          markdown-body: |
            # Hello World

            This is a test email from self-test-action

      - name: Send email with attachments
        uses: licenseware/send-email-notification@45d41bfcbf3194b1a50d41c9c8d036c4ef695866
        with:
          api-key: ${{ secrets.SENDGRID_API_KEY }}
          subject: Self Test Action 2 | ${{ github.ref_name }}-${{ github.run_id }}
          from: ${{ secrets.SENDGRID_FROM_EMAIL }}
          to: ${{ secrets.SENDGRID_TO_EMAIL }}
          markdown-body: |
            # Hello again

            Check the following source
          attachments: |
            main.py
          attachments-disposition: inline
